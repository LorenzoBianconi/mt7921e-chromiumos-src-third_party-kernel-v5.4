// SPDX-License-Identifier: GPL-2.0
//
// Copyright (c) 2020 MediaTek Inc.
// Author: Weiyi Lu <weiyi.lu@mediatek.com>

#include <linux/module.h>
#include "clkchk.h"

static const char * const off_pll_names[] = {
	"univpll",
	"usbpll",
	"msdcpll",
	"mmpll",
	"adsppll",
	"mfgpll",
	"tvdpll",
	"apll1",
	"apll2",
	NULL
};

static const char * const all_clk_names[] = {
	"mipid26m",
	"scp_sel",
	"disp_sel",
	"mdp_sel",
	"img1_sel",
	"img2_sel",
	"ipe_sel",
	"dpe_sel",
	"cam_sel",
	"ccu_sel",
	"dsp7_sel",
	"mfg_ref_sel",
	"mfg_pll_sel",
	"camtg_sel",
	"camtg2_sel",
	"camtg3_sel",
	"camtg4_sel",
	"camtg5_sel",
	"camtg6_sel",
	"spi_sel",
	"msdc50_0_h_sel",
	"msdc50_0_sel",
	"msdc30_1_sel",
	"msdc30_2_sel",
	"audio_sel",
	"aud_intbus_sel",
	"atb_sel",
	"dpi_sel",
	"scam_sel",
	"disp_pwm_sel",
	"usb_top_sel",
	"ssusb_xhci_sel",
	"i2c_sel",
	"seninf_sel",
	"seninf1_sel",
	"seninf2_sel",
	"seninf3_sel",
	"tl_sel",
	"dxcc_sel",
	"aud_engen1_sel",
	"aud_engen2_sel",
	"aes_ufsfde_sel",
	"ufs_sel",
	"aud_1_sel",
	"aud_2_sel",
	"adsp_sel",
	"dpmaif_main_sel",
	"venc_sel",
	"vdec_sel",
	"camtm_sel",
	"pwm_sel",
	"audio_h_sel",
	"aes_msdcfde_sel",
	"sflash_sel",
	"apll_i2s0_m_sel",
	"apll_i2s1_m_sel",
	"apll_i2s2_m_sel",
	"apll_i2s3_m_sel",
	"apll_i2s4_m_sel",
	"apll_i2s5_m_sel",
	"apll_i2s6_m_sel",
	"apll_i2s7_m_sel",
	"apll_i2s8_m_sel",
	"apll_i2s9_m_sel",
	"mainpll_d3",
	"mainpll_d4",
	"mainpll_d4_d2",
	"mainpll_d4_d4",
	"mainpll_d4_d8",
	"mainpll_d4_d16",
	"mainpll_d5_d4",
	"mainpll_d5_d8",
	"mainpll_d6_d4",
	"mainpll_d7_d8",
	"univpll_d3",
	"univpll_d4",
	"univpll_d4_d2",
	"univpll_d4_d4",
	"univpll_d4_d8",
	"univpll_d5",
	"univpll_d5_d2",
	"univpll_d5_d4",
	"univpll_d5_d8",
	"univpll_d6",
	"univpll_d6_d2",
	"univpll_d6_d4",
	"univpll_d6_d8",
	"univpll_d6_d16",
	"univpll_d7",
	"apll1_ck",
	"apll1_d2",
	"apll1_d4",
	"apll1_d8",
	"apll2_ck",
	"apll2_d2",
	"apll2_d4",
	"apll2_d8",
	"mmpll_d4",
	"mmpll_d4_d2",
	"mmpll_d5",
	"mmpll_d5_d2",
	"mmpll_d6",
	"mmpll_d6_d2",
	"mmpll_d7",
	"mmpll_d9",
	"apupll_ck",
	"npupll_ck",
	"tvdpll_ck",
	"tvdpll_d2",
	"tvdpll_d4",
	"tvdpll_d8",
	"tvdpll_d16",
	"msdcpll_ck",
	"msdcpll_d2",
	"msdcpll_d4",
	"osc_d2",
	"osc_d4",
	"osc_d8",
	"osc_d16",
	"osc_d20",
	"adsppll_ck",
	"univpll_192m",
	"univpll_192m_d2",
	"univpll_192m_d4",
	"univpll_192m_d8",
	"univpll_192m_d16",
	"univpll_192m_d32",
	"apll12_div0",
	"apll12_div1",
	"apll12_div2",
	"apll12_div3",
	"apll12_div4",
	"apll12_divb",
	"apll12_div5",
	"apll12_div6",
	"apll12_div7",
	"apll12_div8",
	"apll12_div9",
	"ssusb_top_ref",
	"ssusb_phy_ref",
	"infra_pmic_md",
	"infra_pmic_cn",
	"infra_scpsys",
	"infra_sej",
	"infra_apxgpt",
	"infra_gce",
	"infra_gce2",
	"infra_therm",
	"infra_i2c0",
	"infra_ap_dma_pseudo",
	"infra_i2c2",
	"infra_i2c3",
	"infra_pwm_h",
	"infra_pwm1",
	"infra_pwm2",
	"infra_pwm3",
	"infra_pwm4",
	"infra_pwm",
	"infra_uart1",
	"infra_uart2",
	"infra_uart3",
	"infra_gce_26m",
	"infra_cq_dma_fpc",
	"infra_btif",
	"infra_spi0",
	"infra_msdc0",
	"infra_msdc1",
	"infra_msdc2",
	"infra_msdc0_src",
	"infra_gcpu",
	"infra_trng",
	"infra_auxadc",
	"infra_cpum",
	"infra_ccif1_ap",
	"infra_ccif1_md",
	"infra_auxadc_md",
	"infra_pcie_tl_26m",
	"infra_msdc1_src",
	"infra_msdc2_src",
	"infra_pcie_tl_96m",
	"infra_pcie_pl_p_250m",
	"infra_ccif_ap",
	"infra_debugsys",
	"infra_audio",
	"infra_ccif_md",
	"infra_dxcc_sec_core",
	"infra_dxcc_ao",
	"infra_dbg_trace",
	"infra_devmpu_b",
	"infra_dramc_f26m",
	"infra_irtx",
	"infra_ssusb",
	"infra_disp_pwm",
	"infra_cldma_b",
	"infra_audio_26m_b",
	"infra_modem_temp_share",
	"infra_spi1",
	"infra_i2c4",
	"infra_spi2",
	"infra_spi3",
	"infra_unipro_sys",
	"infra_unipro_tick",
	"infra_ufs_mp_sap_b",
	"infra_md32_b",
	"infra_unipro_mbist",
	"infra_i2c5",
	"infra_i2c5_arbiter",
	"infra_i2c5_imm",
	"infra_i2c1_arbiter",
	"infra_i2c1_imm",
	"infra_i2c2_arbiter",
	"infra_i2c2_imm",
	"infra_spi4",
	"infra_spi5",
	"infra_cq_dma",
	"infra_ufs",
	"infra_aes_ufsfde",
	"infra_ufs_tick",
	"infra_ssusb_xhci",
	"infra_msdc0_self",
	"infra_msdc1_self",
	"infra_msdc2_self",
	"infra_ufs_axi",
	"infra_i2c6",
	"infra_ap_msdc0",
	"infra_md_msdc0",
	"infra_ccif5_ap",
	"infra_ccif5_md",
	"infra_pcie_top_h_133m",
	"infra_flashif_top_h_133m",
	"infra_pcie_peri_26m",
	"infra_ccif2_ap",
	"infra_ccif2_md",
	"infra_ccif3_ap",
	"infra_ccif3_md",
	"infra_sej_f13m",
	"infra_aes",
	"infra_i2c7",
	"infra_i2c8",
	"infra_fbist2fpc",
	"infra_dpmaif_main",
	"infra_pcie_tl_32k",
	"infra_ccif4_ap",
	"infra_ccif4_md",
	"infra_spi6",
	"infra_spi7",
	"infra_66m_peri_bus",
	"infra_free_dcm_133m",
	"infra_free_dcm_66m",
	"infra_peri_bus_dcm_133m",
	"infra_peri_bus_dcm_66m",
	"infra_flashif_peri_26m",
	"infra_flashif_fsflash",
	"infra_ap_dma",
	"peri_periaxi",
	"scp_adsp_audiodsp",
	"aud_afe",
	"aud_22m",
	"aud_24m",
	"aud_apll2_tuner",
	"aud_apll_tuner",
	"aud_tdm",
	"aud_adc",
	"aud_dac",
	"aud_dac_predis",
	"aud_tml",
	"aud_nle",
	"aud_i2s1_b",
	"aud_i2s2_b",
	"aud_i2s3_b",
	"aud_i2s4_b",
	"aud_connsys_i2s_asrc",
	"aud_general1_asrc",
	"aud_general2_asrc",
	"aud_dac_hires",
	"aud_adc_hires",
	"aud_adc_hires_tml",
	"aud_adda6_adc",
	"aud_adda6_adc_hires:",
	"aud_3rd_dac",
	"aud_3rd_dac_predis",
	"aud_3rd_dac_tml",
	"aud_3rd_dac_hires",
	"aud_i2s5_b",
	"aud_i2s6_b",
	"aud_i2s7_b",
	"aud_i2s8_b",
	"aud_i2s9_b",
	"imp_iic_wrap_c_i2c10",
	"imp_iic_wrap_c_i2c11",
	"imp_iic_wrap_c_i2c12",
	"imp_iic_wrap_c_i2c13",
	"imp_iic_wrap_e_i2c3",
	"imp_iic_wrap_s_i2c7",
	"imp_iic_wrap_s_i2c8",
	"imp_iic_wrap_s_i2c9",
	"imp_iic_wrap_ws_i2c1",
	"imp_iic_wrap_ws_i2c2",
	"imp_iic_wrap_ws_i2c4",
	"imp_iic_wrap_w_i2c5",
	"imp_iic_wrap_n_i2c0",
	"imp_iic_wrap_n_i2c6",
	"msdc_top_aes_0p",
	"msdc_top_src_0p",
	"msdc_top_src_1p",
	"msdc_top_src_2p",
	"msdc_top_p_msdc0",
	"msdc_top_p_msdc1",
	"msdc_top_p_msdc2",
	"msdc_top_axi",
	"msdc_top_h_mst_0p",
	"msdc_top_h_mst_1p",
	"msdc_top_h_mst_2p",
	"msdc_top_mem_off_dly_26m",
	"msdc_top_32k",
	"msdc_top_ahb2axi_brg_axi",
	"msdc_axi_wrap",
	"mfg_bg3d",
	"mm_disp_mutex0",
	"mm_disp_config",
	"mm_disp_ovl0",
	"mm_disp_rdma0",
	"mm_disp_ovl0_2l",
	"mm_disp_wdma0",
	"mm_disp_ufbc_wdma0",
	"mm_disp_rsz0",
	"mm_disp_aal0",
	"mm_disp_ccorr0",
	"mm_disp_dither0",
	"mm_smi_infra",
	"mm_disp_gamma0",
	"mm_disp_postmask0",
	"mm_disp_dsc_wrap0",
	"mm_dsi0",
	"mm_disp_color0",
	"mm_smi_common",
	"mm_disp_fake_eng0",
	"mm_disp_fake_eng1",
	"mm_mdp_tdshp4",
	"mm_mdp_rsz4",
	"mm_mdp_aal4",
	"mm_mdp_hdr4",
	"mm_mdp_rdma4",
	"mm_mdp_color4",
	"mm_disp_y2r0",
	"mm_smi_gals",
	"mm_disp_ovl2_2l",
	"mm_disp_rdma4",
	"mm_disp_dpi0",
	"mm_smi_iommu",
	"mm_dsi_dsi0",
	"mm_dpi_dpi0",
	"mm_26mhz",
	"mm_32khz",
	"img_larb9",
	"img_larb10",
	"img_dip",
	"img_gals",
	"img2_larb11",
	"img2_larb12",
	"img2_mfb",
	"img2_wpe",
	"img2_mss",
	"img2_gals",
	"vdec_soc_larb1",
	"vdec_soc_lat",
	"vdec_soc_lat_active",
	"vdec_soc_vdec",
	"vdec_soc_vdec_active",
	"vdec_larb1",
	"vdec_lat",
	"vdec_lat_active",
	"vdec_vdec",
	"vdec_active",
	"venc_set0_larb",
	"venc_set1_venc",
	"venc_set2_jpgenc",
	"venc_set5_gals",
	"cam_larb13",
	"cam_dfp_vad",
	"cam_larb14",
	"cam_cam",
	"cam_camtg",
	"cam_seninf",
	"cam_camsv0",
	"cam_camsv1",
	"cam_camsv2",
	"cam_camsv3",
	"cam_ccu0",
	"cam_ccu1",
	"cam_mraw0",
	"cam_fake_eng",
	"cam_ccu_gals",
	"cam2mm_gals",
	"cam_rawa_larbx",
	"cam_rawa_cam",
	"cam_rawa_camtg",
	"cam_rawb_larbx",
	"cam_rawb_cam",
	"cam_rawb_camtg",
	"cam_rawc_larbx",
	"cam_rawc_cam",
	"cam_rawc_camtg",
	"ipe_larb19",
	"ipe_larb20",
	"ipe_smi_subcom",
	"ipe_fd",
	"ipe_fe",
	"ipe_rsc",
	"ipe_dpe",
	"ipe_gals",
	"mdp_mdp_rdma0",
	"mdp_mdp_tdshp0",
	"mdp_img_dl_async0",
	"mdp_img_dl_async1",
	"mdp_mdp_rdma1",
	"mdp_mdp_tdshp1",
	"mdp_smi0",
	"mdp_apb_bus",
	"mdp_mdp_wrot0",
	"mdp_mdp_rsz0",
	"mdp_mdp_hdr0",
	"mdp_mdp_mutex0",
	"mdp_mdp_wrot1",
	"mdp_mdp_rsz1",
	"mdp_mdp_hdr1",
	"mdp_mdp_fake_eng0",
	"mdp_mdp_aal0",
	"mdp_mdp_aal1",
	"mdp_mdp_color0",
	"mdp_mdp_color1",
	"mdp_img_dl_relay0_async0",
	"mdp_img_dl_relay1_async1",
	/* end */
	NULL
};

static const char * const compatible[] = {"mediatek,mt6873", "mediatek,mt8192", NULL};

static struct clkchk_cfg_t cfg = {
	.aee_excp_on_fail = false,
	.warn_on_fail = true,
	.compatible = compatible,
	.off_pll_names = off_pll_names,
	.all_clk_names = all_clk_names,
};

static int __init clkchk_platform_init(void)
{
	return clkchk_init(&cfg);
}
subsys_initcall(clkchk_platform_init);
